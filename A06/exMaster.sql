CREATE DATABASE ESCOLA_VIRTUAL
USE ESCOLA_VIRTUAL


CREATE TABLE PEOPLE(
    ID INT IDENTITY(1,1) PRIMARY KEY,
    NOME VARCHAR(40),
    CPF VARCHAR(12),
    DT_NASC DATE,
    CARGO VARCHAR(20)
)

ALTER TABLE PEOPLE
    ADD CIDADE VARCHAR(40)
    ADD ATIVO BIT 
    ADD CONSTRAINT DT_NASC CHECK(YEAR(DT_NASC) >= 1992)

INSERT PEOPLE (NOME, CPF, DT_NASC, CARGO, ATIVO, CIDADE) VALUES
    ('FERNANDO', '173334905-33', '01-12-2002', 'PROFESSOR',1, 'RIO DE JANEIRO'),
    ('JOCA', '123444905-33', '01-02-2000', 'PROFESSOR',1, 'SAO PAULO'),
    ('CLAUDIO', '172384905-33', '11-11-2000', 'PROFESSOR',1, 'VILA VELHA'),
    ('PEDRINHO', '132385405-22', '12-12-1994', 'ALUNO',1, 'CURITIBA'),
    ('LUQUINHAS', '132345125-43', '03-09-1992', 'ALUNO', 0, 'TILAMBUCO'),
    ('VITINHO', '100985405-09', '10-02-1999', 'ALUNO', 1, 'PETROPOLIS'),
    ('BENICIO', '876585405-99', '12-12-1994', 'ALUNO',0 , 'ITAPOA'),
    ('GLAUBER', '065474905-33', '10-08-1998', 'PROFESSOR',1, 'BRUMADINHOS')


DELETE FROM PEOPLE
SELECT *FROM PEOPLE


CREATE TABLE CURSO(
    ID INT IDENTITY (1,1) PRIMARY KEY,
    NOME VARCHAR(40),
    VALOR MONEY
)

ALTER TABLE CURSO
    ADD CONSTRAINT VALOR DEFAULT (200.00 ) FOR VALOR

INSERT CURSO (NOME,VALOR) VALUES 
('CALCULO 2', DEFAULT),
('ALGEBRA', 400.00),
('PROGRAMACAO 1', 900.99),
('ODONTOLIGIA', 1880.87),
('VETERINARIA', 700),
('PSICOLOGIA', DEFAULT),
('FISIOTERIA', 389.90)

SELECT * FROM CURSO
CREATE TABLE TURMA(
    ID INT IDENTITY(1,1) PRIMARY KEY,
    ID_CURSO INT FOREIGN KEY (ID_CURSO) REFERENCES CURSO(ID),
    ID_PROF INT FOREIGN KEY (ID_PROF) REFERENCES PEOPLE(ID),
    DT_INIT DATE,
    DT_END DATE
)

INSERT TURMA (ID_CURSO, ID_PROF, DT_INIT, DT_END) VALUES
    (1,28, GETDATE(), '12-12-2026'),
    (2,33, GETDATE(), '12-12-2027'),
    (3,34, GETDATE(), '12-12-2026')

CREATE TABLE ALUNO_TURMA(
    ID INT IDENTITY(1,1) PRIMARY KEY,
    ID_TURMA INT FOREIGN KEY (ID_TURMA) REFERENCES TURMA(ID),
    ID_ALUNO INT FOREIGN KEY (ID_ALUNO) REFERENCES PEOPLE(ID)
)

